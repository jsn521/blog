var html = require('./parser.js');
var handlers = require('./handlers.js');

var printer = new handlers.Printer();

var dom = new handlers.DOM(function(document) {
    console.log(
        require('util').inspect(document, false, null, true)
    );
});

var parser = new html.Parser({
    decode: false,
    trim: true
});

/*parser.on('text', function(text) {
    console.log('text:', text);
});

parser.on('open', function(name, attributes, closing) {
    console.log(closing ? 'self-closing:' : 'open:', 
        name, JSON.stringify(attributes));
});

parser.on('close', function(name) {
    console.log('close:', name);
});*/

// dom.listen(parser);
printer.listen(parser);

// parser.write('<p d="wawa>')
parser.write('<style type="text/css">');
parser.write('.body { color: black }');
parser.write('</style>');
parser.write('<!-- this is a');
parser.write('comment --><textarea = ==r f$="&not &note/\'d');
parser.write('ha">wowo<input></</</f</textarea>dd<');
parser.write('![CDATA[hrhrhr');
parser.write('fdfdf<token>dsds');
parser.write('wawa]]>hehehe<p rere=woops><tag m>');
parser.write('durr<d');
parser.write('iv style="');
parser.write('color:red');
parser.write('">\n</');
parser.write('div></');
parser.write('p><title><wop>hehe</title durr=wop wa');
parser.end();
